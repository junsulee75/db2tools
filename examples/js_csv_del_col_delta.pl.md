[Go to main page](https://github.ibm.com/junsulee/db2tools) 
# js_csv_del_col_delta.pl   

[Download](https://github.ibm.com/junsulee/db2tools/blob/master/js_csv_del_col_delta.pl)    

Read csv like files (Db2 SQL del output or any csv with comma separated), then print delta values for a pointed Nth column.  
It just reads lines and display delta values between the lines.   
Therefore it's important to give correct order inputs. This script is not responsible for that.    
As of now, this script supports only one column for each line to process.  

``` 
Usage:
-f <filenames>
-c <Nth column>
-k <keyword to grep if any. If not set, reading all lines from files.>
-s <CSV delimiter character. By default, comma.>
-d <debug mode> -- 1:debug
example : 
js_csv_del_col_delta.pl -f 'mon_get_workload.del*' -c=4 -k 'SYSDEFAULTUSERWORKLOAD'
```   

* Example analysis scenario #01   

There are bunch of files from SQL mon_get_workload functions del outputs.    

```
mon_get_workload.del.20210921_080004
mon_get_workload.del.20210921_080026
..
mon_get_workload.del.20210921_085922
mon_get_workload.del.20210921_085944
```
And each file has the following 2 lines.   
```
"SYSDEFAULTUSERWORKLOAD",1,0,13094,2634986756,0,0,0,74823706695,31667459526,137004425,131565,37767,0,62677331,61840920,0,0,0,0,1749,11165,0,111065320,18844,719590742505,0,39263990772,185014311,180441094,18920208,525441108,51124592,4415197862,1088351,4471789670,1451119,46759,251215,1838822731,12167,16332413,86698907964,89922,16444901,0,0,15153635,4865,0,0,509055249,421097338,9285758871,1841843712,1041706883868,6315747691,2134133629625,7162860897088,12068062,5920773613,75011201,5920789313,1812130048,2893255558,0,0,312081492357,975970865,9285758711,7414175,7411511,155910613,155910661,0,0,3363406,180764,147637,44089,207,71,30,827266842,459340403,2634999850,850121927,375957898,2657835958,14779074,112902167,565174733,57941321,3280145749,16923,18532,15903,398938,14319,12927182,9189937,54,0,0,0,0,0,0,17121,13063286233,44269,2780855411,0,0,0,0,0,0,0,0,0,0,0,0,0,0,74898033789,0,0,0,31605750171,0,0,0,37767,0,0,0,0,0,0,98,36,0,0,0,362768,56591808,0,1088351,4415197862,46759,1088351,4415197862,251215,14778513,14778752,0,0,0,24101859,130374031,0,0,0,0,0,0,0,19522,0,0,279,0,0,0,1283922680,25902867,0,437630,0,0,75146720,24483472091,209350996,0,7008630,0,0,16823,1344,0,0,0,0,131994,25150615,36866511,2634958203,13094,0,479822,106595,16919,456412,94492,16919,74898033789,31605750171,37767,0,0,0,0,0,0,0,0,28691546,199180299,258419059,39703272,0,0,0,0,0,0,2631435566,3280781934,13124,2164124733,470840392,67,0,0,0,0,0,0,0,16701,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,810460469,809501135,4,8688099,357495,244,7420,0,691349,0,691349,7420,0,0,0,0,0,423750427,6027826175,11462,10265,0,0,0,0,0,0,0,2634986074,0,0,+0.00000000000000E+000,+0.00000000000000E+000,0,2634999850,0,0
"SYSDEFAULTADMWORKLOAD",2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,+0.00000000000000E+000,+0.00000000000000E+000,0,0,0,0
```
Here, you are interested in `SYSDEFAULTUSERWORKLOAD` and 5th column delta values.     

Then, running like this.    


```
$ js_csv_del_col_delta.pl -f 'mon_get_workload.del*' -c=5 -k 'SYSDEFAULTUSERWORKLOAD' 
..
mon_get_workload.del.20210921_083202 :          215830 
mon_get_workload.del.20210921_083224 :          216201 
mon_get_workload.del.20210921_083246 :           11875   <===
mon_get_workload.del.20210921_083307 :          225506 
mon_get_workload.del.20210921_083329 :          307316 
...
```